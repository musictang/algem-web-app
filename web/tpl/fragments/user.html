<!DOCTYPE html>
<!--
 * @(#) login.html Algem Web App 1.1.0 28/01/16
 *
 * Copyright (c) 2015 Musiques Tangentes. All Rights Reserved.
 *
 * This file is part of Algem Web App.
 * Algem Web App is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Algem Web App is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with Algem Web App. If not, see <http://www.gnu.org/licenses/>.
-->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head>
    <title></title>
    <meta charset="utf-8" />
  </head>
  <body>
    <div th:fragment="login">
      <div class="closing-bar"><a class="close-link" href="#"><i class="fa fa-close"></i></a></div>
      <!--<form id="login-form" th:action="@{/jxlogin.html}" accept-charset="UTF-8" class="panel">-->
      <form id="ajax-login-form" th:action="@{/jxlogin}" class="panel">
         <fieldset><legend th:text="#{connect.label}"></legend>
          <label for="login" th:text="#{form.username.label}">Login</label>
          <input type="text" id="login" required="required" name="j_username"/>
          <label for="password" th:text="#{form.password.label}" >Password</label>
          <input type="password" id="password" required="required" name="j_password"/>
          <input type="submit" id="login-submit-button" th:value="#{connection.label}" class="button-small pure-button pure-button-primary"/>
        </fieldset>
        <p class="error" style="display: none;"></p>
        <p class="success" style="display: none;"></p>
      </form>
      <p class="note indented"><a href="recover.html" th:text="#{password.forgotten}"></a></p>
      <p class="note indented"><span th:text="#{sign-up.warning}"></span><br />
        <a href="signup.html" th:text="#{sign-up.label}"></a></p>
    </div>
    <div th:fragment="booking">
      <form id="booking-form" th:action="@{/book.html}" method="post" th:object="${booking}">
        <fieldset>
          <input id="ajax-url" type="hidden" th:value="@{/xbook}" />
          <input name="estab" type="hidden" th:value="${param.e[0]}"/>
          <ul class="simple" id="bookingType">
            <li><input id="member" type="radio" th:field="*{type}" th:value="${T(net.algem.planning.Schedule).BOOKING_MEMBER}" /><label class="inline" for="member" th:text="#{booking.member.label}"></label></li>
            <li><input id="group" type="radio" th:field="*{type}" th:value="${T(net.algem.planning.Schedule).BOOKING_GROUP}" /><label class="inline" for="group" th:text="#{booking.group.label}"></label></li>
          </ul>
          <div id="groupPanel"></div>
          <label for="bookdate" th:text="#{date.label}">Date</label>
          <input type="text" id="bookdate" style="font-size:small" th:field="*{date}"/>
          <p>
            <label for="startTime" th:text="#{hour.label}">Heure</label>
            <select id="startTime" style="display: inline-block" th:field="*{startTime}">
              <option th:each="half,dv : ${#numbers.sequence(offset, 1410, 30)}" th:with="h=(${half < 600} ? '0' + ${half/60} : ${half/60}) + ':' + (${dv.odd} ? '00':'30')" th:value="${h}" th:text="${h}" />
            </select>
            <select id="endTime" style="display: inline-block" disabled="disabled" >
              <option th:each="half,dv : ${#numbers.sequence(offset, 1440, 30)}" th:with="h=(${half < 600} ? '0' + ${half/60} : ${half/60}) + ':' + (${dv.odd} ? '00':'30')" th:value="${h}" th:text="${h}" />
            </select>
            <span class="error"></span>
          </p>
          <p><label for="spinner" th:text="#{booking.length.label}">Dur√©e</label>
            <input id="spinner" value="1" th:field="*{timeLength}">
          </p>
          <p><label for="room" th:text="#{room.label}"></label>
            <select id="room" th:field="*{room}">
              <option th:each="entry : ${planning}" th:value="${entry.key}" th:text="${entry.value[0].roomName}"></option>
              <option th:each="entry : ${freeplace}" th:value="${entry.key.id}" th:text="${entry.key.name}"></option>
            </select>
          </p>
          <div style="text-align: right"><input style="display: inline-block" type="submit" th:value="#{book.label}" class="pure-button pure-button-primary"/></div>
        </fieldset>
        <p class="error"></p>
      </form>
    </div>
  </body>
</html>
