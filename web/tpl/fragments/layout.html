<!DOCTYPE html>
<!--
 * @(#) layout.html Algem Web App 1.0.6 05/12/2015
 *
 * Copyright (c) 2015 Musiques Tangentes. All Rights Reserved.
 *
 * This file is part of Algem Web App.
 * Algem Web App is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Algem Web App is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with Algem Web App. If not, see <http://www.gnu.org/licenses/>.
-->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head th:fragment="common-head">
    <title th:text="${title}"></title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css" />
    <link href='https://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css' />
    <link rel="stylesheet" th:href="@{/resources/themes/css/common.css}" />
    <link rel="stylesheet" th:href="@{/resources/themes/css/custom.css}" />
    <link rel="stylesheet" th:href="@{/resources/themes/css/mediaqueries.css}" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
    <script charset="UTF-8" type="text/javascript" th:src="@{/resources/js/jquery-1.9.0.min.js}"></script>
    <script charset="UTF-8" type="text/javascript" th:src="@{/resources/js/common.js}"></script>
    <script th:fragment="script-menu" type="text/javascript">
      $(function () {
        setCommonEvents();
      });
    </script>
  </head>
  <body>
    <header th:fragment="header"></header>
    <div th:fragment="help" >
      <div class="closing-bar"><a class="close-link" href="#"><i class="fa fa-close"></i></a></div>
      <!--<p>Aide</p>-->
      <div class="indented">
        <h2 th:text="#{booking.help.title}">Comment réserver</h2>
        <p th:text="#{booking.help.info}"></p>
        <h5>Remarques</h5>
        <ol style="width:80%;font-size:smaller">
          <li th:text="#{booking.help.note1}"></li>
          <li th:text="#{booking.help.note2(${bookingConf.minDelay},${bookingConf.maxDelay})}"></li>
          <li th:text="#{booking.help.note3}"></li>
          <li th:text="#{booking.help.note4}"></li>
        </ol>
        <h2 th:text="#{help.color.label}">Couleurs</h2>
        <ul style="margin-bottom: 1em">
          <li th:each="def:${colorDefs}"  >
            <span class="color-square" th:title="#{${def.value.key}}" th:style="${'background-color:'+def.value.value}"></span>[[#{${def.value.key}}]]
          </li>
<!--          <li><span class="colorSquare" title="Cours collectif" style="background-color:#FF3333"></span>&nbsp;Cours collectif</li>
          <li><span class="colorSquare colorHelp" style="background-color:#00D059;"></span>&nbsp;Cours disponible
            <span style="font-size: smaller">(Place momentanément disponible pour les répétitions)</span></li>
          <li><span class="colorSquare" title="Cours occupé" style="background-color:#80e82c"></span>&nbsp;Cours occupé</li>
          <li><span class="colorSquare" title="Atelier découverte, master-class" style="background-color:#F7F7AC"></span>&nbsp;Atelier découverte, master-class</li>
          <li><span class="colorSquare" title="Stage" style="background-color:#F7F77C"></span>&nbsp;Stage</li>
          <li><span class="colorSquare" title="Répétition groupe" style="background-color:#2158FF"></span>&nbsp;Répétition groupe</li>
          <li><span class="colorSquare" title="Répétition adhérent" style="background-color:#3399FF"></span>&nbsp;Répétition adhérent</li>
          <li><span class="colorSquare" title="Salle fermée" style="background-color:#ccc"></span>&nbsp;Salle fermée</li>-->
        </ul>
      </div>
    </div>
    <div th:fragment="info">
      <div class="indented">
        <h2 th:id="#{hotline.label}" th:text="#{hotline.label}">Hotline</h2>
        <table class="pure-table pure-table-horizontal">
          <tr th:each="estab:${@hotline}"><th th:text="${estab.key}"></th>
            <td><a th:text="${estab.value[0]}" th:href="${'tel:+33' + #strings.replace(estab.value[0],' ', '')}"></a></td>
            <td><ul><li th:each="h,status:${estab.value}" th:if="${status.index} > 0" th:utext="${h}"></li></ul></td>
          </tr>
        </table>
        <h2 th:id="#{contact.label}" th:text="#{contact.label}">Contact</h2>
        <table class="pure-table pure-table-horizontal" th:with="org=${@organization}">
          <tr><th th:text="#{email.label}"></th><td><a th:text="${org['email.label']}" th:href="${'mailto:' + org['email.label']}"></a></td></tr>
          <tr><th th:text="#{address.label}"></th><td><a target="_blank" th:text="${org['address.label']}" th:href="${org['address.map']}"></a></td></tr>
          <tr th:each="entry,status:${org}" th:if="${status.index} > 3">
            <th th:text="#{${entry.key}}"></th>
            <td><a target="_blank" th:text="${entry.value}" th:href="${entry.value}"></a></td>
          </tr>
        </table>
      </div>
    </div>
    <div th:fragment="roomInfo" th:with="offPeakTime=${conf['offPeakTime']}" class="indented">
      <h2 th:text="#{room.info.label}"></h2>
      <table class="pure-table pure-table-bordered pure-table-striped mobile">
        <thead>
          <tr>
            <th th:text="#{room.label}" style="width:20%"></th>
            <th th:text="#{usage.label}">Fonction</th>
            <th th:text="#{offPeak.price.label}" style="width:15%">Heures creuses</th>
            <th th:text="#{full.price.label}" style="width:15%">Plein tarif</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="room:${roomInfo}">
            <td th:text="${room.name}"></th>
              <td th:text="${room.usage}"></td>
              <td style="text-align: right" th:text="${#numbers.formatDecimal(room.offPeakPrice,1,2) + ' €'}"></td>
              <td style="text-align: right" th:text="${#numbers.formatDecimal(room.fullPrice,1,2)} + ' €'"></td>
          </tr>
        </tbody>
        <tfoot><tr><td colspan="4" style="font-weight: bold" th:text="#{offPeak.price.info(${offPeakTime})}"></td></tr></tfoot>
      </table>
    </div>

    <footer th:fragment="footer">
      <a class="logo" target="_blank" th:href="${@organization['website.label']}"><img th:src="@{/resources/themes/img/logo.png}" /></a>
      <address>
        &copy;&nbsp;2015&nbsp;Musiques&nbsp;Tangentes&nbsp;AGPL&nbsp;v.3&nbsp;| <a href="http://www.algem.net" target="_blank">http://www.algem.net</a>
      </address>
    </footer>
  </body>
</html>

