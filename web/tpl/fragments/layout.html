<!DOCTYPE html>
<!--
 * @(#) layout.html Algem Web App 1.4.2 07/09/16
 *
 * Copyright (c) 2015-2016 Musiques Tangentes. All Rights Reserved.
 *
 * This file is part of Algem Web App.
 * Algem Web App is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Algem Web App is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with Algem Web App. If not, see <http://www.gnu.org/licenses/>.
-->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head th:fragment="common-head(title)">
    <title th:text="${title}"></title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" th:href="@{/resources/themes/css/pure-min.css}" />
    <link rel="stylesheet" th:href="@{/resources/themes/css/common.css}" />
    <link rel="stylesheet" th:href="@{/resources/themes/css/custom.css}" />
    <link rel="stylesheet" th:href="@{/resources/themes/css/mediaqueries.css}" />
    <link rel="stylesheet" th:href="@{/resources/themes/css/font-awesome.min.css}" />
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />-->
    <script type="text/javascript" th:src="@{/resources/js/jquery-1.9.0.min.js}"></script>
    <script type="text/javascript" th:src="@{/resources/js/jquery-ui-1.11.4.min.js}"></script>
    <script type="text/javascript" th:src="@{/resources/js/common.js}"></script>
  </head>
  <body>
    <header th:fragment="header"></header>
    <div th:fragment="help" >
      <div class="closing-bar"><a class="close-link" href="#"><i class="fa fa-close"></i></a></div>
      <div>
        <h2 th:text="#{booking.help.title}">Comment réserver</h2>
        <p th:text="#{booking.help.info}"></p>
        <h5>Remarques</h5>
        <ol style="width:80%;font-size:smaller">
          <li th:text="|#{booking.help.note1} *|"></li>
          <li th:text="#{booking.help.note2(${bookingConf.minDelay},${bookingConf.maxDelay})}"></li>
          <li th:text="#{booking.help.note3}"></li>
          <li th:text="#{booking.help.note4}"></li>
        </ol>
        <p style="font-size: smaller;font-style:italic">* Ouvrez le menu <i class="fa fa-bars"></i> et cliquez sur l'icone <i class="fa fa-user"></i> pour vous connecter.</p>
        <p><a th:href="@{/help.html}" th:text="#{help.page.label}">Help</a></p>
        <h2 th:text="#{help.color.label}">Couleurs</h2>
        <ul style="margin-bottom: 1em">
          <li th:each="def:${colorDefs}">
            <span class="color-square" th:title="#{${def.value.key}}" th:style="${'background-color:'+def.value.value}"></span>[[#{${def.value.key}}]]
          </li>
        </ul>
      </div>
    </div>
    <div th:fragment="color-help">
      <div class="closing-bar"><a class="close-link" href="#"><i class="fa fa-close"></i></a></div>
      <div>
        <h2 th:text="#{help.color.label}">Couleurs</h2>
        <ul style="margin-bottom: 1em">
          <li th:each="def:${colorDefs}"  >
            <span class="color-square" th:title="#{${def.value.key}}" th:style="${'background-color:'+def.value.value}"></span>[[#{${def.value.key}}]]
          </li>
        </ul>
      </div>
    </div>
    <div th:fragment="info">
      <div class="info">
        <h2 th:id="#{hotline.label}" th:text="#{hotline.label}">Hotline</h2>
        <table class="pure-table pure-table-horizontal mobile">
          <tr th:each="estab:${@hotline}">
            <th th:text="${estab.key}"></th>
            <td><a th:text="${estab.value[0]}" th:href="${'tel:+33' + #strings.replace(estab.value[0],' ', '')}"></a><ul class="disc"><li th:each="h,status:${estab.value}" th:if="${status.index} > 0" th:utext="${h}"></li></ul>
            </td>
          </tr>
        </table>
        <h2 th:id="#{contact.label}" th:text="#{contact.label}">Contact</h2>
        <table class="pure-table pure-table-horizontal mobile" th:with="org=${@organization}">
          <tr>
            <th th:text="#{email.label}"></th><td><a th:text="${org['email.label']}" th:href="${'mailto:' + org['email.label']}"></a></td>
          </tr>
          <tr><th th:text="#{address.label}"></th><td><a target="_blank" th:text="${org['address.label']}" th:href="${org['address.map']}"></a></td></tr>
          <tr th:each="entry,status:${org}" th:if="${status.index} > 3">
            <th>&nbsp;</th>
            <td><a target="_blank" th:utext="#{${entry.key}}" th:href="${entry.value}"></a></td>
          </tr>
        </table>
      </div>
    </div>
    <div th:fragment="roomInfo" th:with="offPeakTime=${conf['offPeakTime']}" class="indented">
      <h2 th:text="#{room.info.label}"></h2>
      <table class="pure-table pure-table-bordered pure-table-striped mobile condensed">
        <thead>
          <tr>
            <th th:text="#{room.label}" style="width:20%"></th>
            <th th:text="#{usage.label}">Fonction</th>
            <th th:text="#{offPeak.price.label}" style="width:15%">Heures creuses</th>
            <th th:text="#{full.price.label}" style="width:15%">Plein tarif</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="room:${roomInfo}">
            <td th:text="${room.name}"></th>
              <td th:text="${room.usage}"></td>
              <td style="text-align: right" th:text="${#numbers.formatDecimal(room.offPeakPrice,1,2) + ' €'}"></td>
              <td style="text-align: right" th:text="${#numbers.formatDecimal(room.fullPrice,1,2)} + ' €'"></td>
          </tr>
        </tbody>
        <tfoot><tr><td colspan="4" style="font-weight: bold" th:text="#{offPeak.price.info(${offPeakTime})}"></td></tr></tfoot>
      </table>
    </div>

    <footer th:fragment="footer">
      <a class="logo" target="_blank" th:href="${@organization['website.label']}"><img th:src="@{/resources/themes/img/logo.png}" /></a>
      <address>
        &copy;&nbsp;2015&nbsp;Musiques&nbsp;Tangentes&nbsp;AGPL&nbsp;3&nbsp;| v.1.4.2&nbsp;<a href="http://www.algem.net" target="_blank">www.algem.net</a>
      </address>
    </footer>
    <script th:fragment="common-script" type="text/javascript">
      $(function () {
        setCommonEvents();
      });
    </script>
  </body>
</html>

